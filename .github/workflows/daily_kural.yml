name: Daily kural Sender

# This defines the triggers for the workflow
on:
  # Runs the job daily at 8:00 AM Coordinated Universal Time (UTC)
  schedule:
    - cron: '30 12 * * *'
  # Allows you to test the job manually from the GitHub Actions tab
  workflow_dispatch:

jobs:
  send-kural:
    runs-on: ubuntu-latest
    
    steps:
    # 1. Downloads your code onto the runner
    - name: Checkout repository code
      uses: actions/checkout@v4

    # 2. Sets up the Python 3.11 environment
    - name: Set up Python 3.11
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
                                                                                                                              
    # 3. Executes the Python script, INJECTING SECRETS
    - name: Execute Kural Sender Script
      # The 'env' block maps the GitHub Secrets to the environment variables
      # that your script (daily_thirukkural.py) reads.
      env:
        APP_PASSWORD: ${{ secrets.APP_PASSWORD }}
        SENDER_EMAIL: ${{ secrets.SENDER_EMAIL }}
        RECEIVER_EMAILS: ${{ secrets.RECEIVER_EMAILS }}
        # Ensure this run command uses your correct file name!
      run: python daily_thirukkural.py

